openapi: 3.0.1
info:
  title: 'Digitata Coupons API'
  version: 0.5.0
paths:
  '/eligible':
    post:
      operationId: CouponEligible
      description: Checks eligibility of a coupon
      requestBody:
        description: Description of promo to check for eligiblity
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InputPromoEligible"
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                $ref: "#/components/schemas/ResultPromoEligible"

  '/redeem':
    post:
      operationId: CouponRedeem
      description: Redeems a coupon id received from /eligible
      requestBody:
        description: Description of eligible promo to redeem
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InputPromoRedeem"
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                $ref: "#/components/schemas/ResultPromoRedeem"

components:
  schemas:
    PromoProduct:
      type: object
      properties:
        productId:
          type: string
        name:
          type: string
        description:
          type: string
        image:
          type: string
      required:
        - productId
        - type
    RedeemedProduct:
      type: object
      properties:
        productId:
          type: string
        status:
          type: string
        provisionId:
          type: string
      required:
        - productId
        - status
        - provisionId

    PromoProductProvisioned:
      type: object
      properties:
        productId:
          type: string
        provisionId:
          type: string
        status:
          type: string
        errorMessage:
          type: string
      required:
        - productId
        - provisionId
        - status

    InputPromoEligible:
      type: object
      properties:
        code:
          type: string
      required:
        - code

    ResultPromoEligible:
      type: object
      properties:
        eligibleId:
          type: string
        eligible:
          type: boolean
        promos:
          type: array
          items:
            $ref: "#/components/schemas/PromoProduct"
        errorMessage:
          type: string
      required:
        - valid

    InputPromoRedeem:
      type: object
      properties:
        eligibleId:
          type: string
        msisdn:
          type: string
      required:
        - eligibleId
        - msisdn

    ResultPromoRedeem:
      type: object
      properties:
        redeemedId:
          type: string
        status:
          type: string
        promos:
          type: array
          items:
            $ref: "#/components/schemas/RedeemedProduct"
        errorMessage:
          type: string
      required:
        - status




    Pet:
      type: object
      properties:
        id:
          type: number
        type:
          type: string
        name:
          type: string
        nickname:
          type: string
        age:
          type: number
      required:
        - id
        - type
        - name
